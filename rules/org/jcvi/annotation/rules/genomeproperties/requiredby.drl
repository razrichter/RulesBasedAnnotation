#created on: Apr 6, 2010
package org.jcvi.annotation.rules.genomeproperties
import org.jcvi.annotation.facts.*;

rule "FeatureProperty required_by GenomeProperty"
	
	when
		# there does not exist a FeatureProperty that is required_by a GenomeProperty and
		# the GenomeProperty has been assigned,
		# then, if the GenomeProperty has been assig, it should be retracted from the feature.genome
		featureprop	 	:not( FeatureProperty() )
		genomeprop	 	:GenomeProperty()
		relationship	:PropertyRelationship(
							subject 	== featureprop, 
							type	 	== RelationshipType.REQUIRED_BY, 
							object 		== genomeprop )
		genome			: Genome( properties contains genomeprop )
		feature			: Feature( properties contains featureprop, genome == genome )
		
 	then 
		# remove the genome property on the genome
		genome.removeProperty(genomeprop);	
end
